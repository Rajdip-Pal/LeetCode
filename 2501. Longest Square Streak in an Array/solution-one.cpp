#include <iostream>
#include <vector>
#include <algorithm>
#include <cmath>
#include <unordered_map>
#include <unordered_set>

class Solution
{
public:
    static int longestSquareStreak(const std::vector<int> &nums)
    {
        std::ios::sync_with_stdio(false);
        std::cin.tie(nullptr);
        std::cout.tie(nullptr);

        int maxStreak{-1};
        std::unordered_map<unsigned long, bool> squareCollections, givenSquaredElements;

        {
            unsigned long square{};
            for (unsigned long i = 2; (square = i * i) <= 100000; i++)
                squareCollections[square] = true;
        }

        {
            for (int i{}; i < nums.size(); i++)
                if (squareCollections[nums[i]])
                    givenSquaredElements[nums[i]] = true;
        }

        {
            int currentStreak{};
            unsigned long currentNum{};

            for (int i = 0; i < nums.size(); i++)
                if (givenSquaredElements[(currentNum = powl(nums[i], 2))])
                {
                    currentStreak += 2;
                    while (givenSquaredElements[(currentNum *= currentNum)])
                        currentStreak++;

                    maxStreak = std::max(currentStreak, maxStreak);
                    currentStreak = 0;
                    currentNum = 0;
                }
                else
                    currentNum = 0;
        }

        return maxStreak < 2 ? maxStreak = -1 : maxStreak;
    }
};

int main(int argc, char const *argv[])
{
    std::vector<int> nums = {1749, 8181, 5407, 876, 8737, 1821, 6907, 3322, 1173, 4796, 5650, 8829, 4717, 8320, 786, 1690, 1135, 5130, 8414, 1554, 2888, 8167, 1305, 7234, 2129, 4756, 1508, 6026, 3006, 6898, 1824, 5460, 3156, 7700, 7955, 1310, 9536, 6814, 183, 2736, 7004, 5928, 6233, 8479, 8166, 1790, 486, 6846, 6504, 93, 1555, 953, 5058, 4436, 6883, 9051, 2369, 7262, 3374, 4504, 8686, 7696, 9479, 6874, 9192, 1334, 8807, 9803, 4870, 6198, 1780, 5312, 6738, 3013, 7790, 8256, 5355, 2638, 8533, 9724, 454, 5790, 4884, 827, 8303, 544, 2723, 5045, 2038, 2647, 3841, 1186, 2940, 5091, 11, 9470, 2407, 7365, 8135, 9071, 2696, 7241, 1705, 1013, 1129, 7353, 6283, 3047, 325, 5570, 9456, 4939, 8265, 342, 9117, 5086, 5509, 5468, 4160, 1281, 637, 9110, 9768, 4746, 5573, 8344, 8612, 4167, 4829, 7686, 5951, 8266, 1899, 5819, 1618, 7208, 4821, 8996, 6368, 7355, 9486, 6834, 9067, 8877, 4316, 4074, 3311, 3490, 8998, 283, 6002, 2650, 1698, 5153, 5398, 6714, 6483, 7553, 2574, 9371, 2714, 6161, 5861, 4928, 7949, 6837, 8204, 2171, 7175, 1476, 6006, 9384, 317, 4535, 4423, 5027, 1730, 1905, 9314, 4700, 297, 8951, 1494, 1196, 2894, 9526, 6577, 9633, 3918, 5400, 6408, 7997, 118, 2242, 2590, 8494, 2769, 7406, 8219, 9980, 8525, 8687, 6245, 814, 3794, 9392, 7344, 220, 8760, 8028, 7100, 6320, 7863, 2468, 3276, 3285, 9182, 403, 603, 8103, 9613, 5956, 3050, 9382, 9094, 2799, 6825, 7638, 7590, 2782, 4303, 1259, 2482, 1609, 9592, 421, 8723, 9464, 4715, 421, 6700, 7975, 382, 2759, 661, 3876, 666, 7449, 2579, 2923, 8919, 9150, 8607, 6907, 8701, 436, 1129, 8902, 980, 4852, 3890, 4086, 9100, 3837, 9484, 2497, 3037, 9427, 5301, 6427, 6751, 6398, 9403, 7650, 2636, 6417, 8387, 4325, 8968, 7749, 2058, 6257, 9826, 7693, 2423, 3200, 7305, 5412, 8030, 7506, 4665, 3083, 3097, 2263, 6241, 953, 8112, 5005, 9900, 2729, 3527, 5921, 5536, 4884, 9542, 7815, 3364, 9608, 4729, 6855, 1844, 8030, 4824, 2067, 3040, 8940, 4961, 8878, 2476, 6429, 3378, 6734, 2959, 319, 8062, 1384, 2640, 3356, 2379, 9828, 1262, 2044, 9578, 5988, 7084, 3747, 9443, 298, 1848, 1654, 6837, 7865, 6736, 1448, 1343, 719, 3870, 6588, 8613, 8727, 9230, 1299, 5389, 5144, 3383, 9674, 221, 2943, 4209, 1113, 4626, 8999, 1098, 5830, 2295, 8415, 4915, 9240, 6704, 1333, 9189, 2985, 4029, 9976, 6541, 8327, 2543, 973, 8826, 2439, 7227, 4990, 1408, 1290, 4075, 7872, 84, 4537, 3350, 5207, 1850, 7669, 9351, 3303, 7471, 6059, 942, 7719, 5042, 861, 5723, 3523, 6576, 4119, 9796, 9899, 7215, 8545, 9839, 3068, 8651, 2829, 2701, 4532, 3321, 5779, 1978, 526, 6689, 4201, 5601, 760, 6369, 3374, 5529, 1214, 7731, 3339, 6411, 8316, 4114, 1006, 1901, 729, 2020, 7432, 1575, 9064, 2016, 418, 8697, 6760, 4229, 3893, 1411, 484, 4425, 2109, 421, 2232, 9663, 7519, 9873, 6164, 614, 518, 5394, 106, 7729, 7785, 8063, 2999, 1353, 4493, 1713, 5075, 5216, 4485, 9726, 8806, 9007, 9148, 624, 5456, 6743, 1362, 4244, 2873, 1270, 4496, 5789, 9234, 798, 8650, 6923, 2333, 5709, 809, 680, 2238, 4910, 4436, 7761, 6912, 8249, 5062, 3138, 109, 8144, 7259, 3553, 7273, 5048, 8282, 2833, 2124, 8382, 7896, 8112, 6795, 579, 6717, 7257, 7431, 1097, 1243, 3315, 7948, 6697, 2902, 1897, 1362, 4527, 8118, 4693, 1804, 647, 780, 1058, 3569, 197, 1787, 168, 5485, 2517, 7735, 575, 1095, 2122, 4498, 6648, 7366, 9302, 1876, 8129, 2336, 4212, 6071, 1589, 9059, 7902, 4253, 6432, 5787, 168, 236, 8491, 2913, 2403, 4073, 5613, 7196, 5851, 548, 8481, 5557, 6944, 7647, 247, 6377, 602, 4777, 5308, 8403, 2513, 5051, 2275, 946, 6953, 1493, 4790, 8678, 20, 7401, 4868, 5900, 5732, 7815, 4109, 414, 7877, 6627, 1238, 4225, 8612, 3762, 6784, 8849, 266, 3168, 3020, 133, 1353, 6445, 1900, 6228, 8470};
    std::cout << Solution::longestSquareStreak(nums) << std::endl;

    return 0;
}
